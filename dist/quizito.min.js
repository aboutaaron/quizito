/*! quizito - v0.0.1 - 2014-08-04
* Copyright (c) 2014 ; Licensed MIT */
function Quizito(a,b){"use strict";this.container=document.querySelector(a),this.questions=b,this.init()}Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&Object.defineProperty(this,a,{get:e,set:f,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(a){var b=this[a];delete this[a],this[a]=b}}),Quizito.prototype={init:function(){var a=this;a.state="start",a.count=0,a.answers=[],a.buildTemplate('<div class="quiz-body"><div class="quiz-question">Question></div><div class="quiz-answer"><input type="radio" name="quiz-radio" id="quiz-yes" value="yes"> Yes <input type="radio" name="quiz-radio" id="quiz-no" value="no"> No </div> <div class="quiz-controls"> <a href="#" class="quiz-submit">submit</a> </div> </div>'),a.cycle(),a.on("change",function(){a.answers.push({count:a.count,question:a.questions[a.count-1].question,answer:this.value})}),a.on("submit",function(b){b.preventDefault(),a.cycle()}),a.watch("count",function(a,b,c){return c}),a.watch("state",function(a,b,c){return c})},reset:function(){var a=this,b=a.container.querySelector(".quiz-retry");b.addEventListener("click",function(b){b.preventDefault(),a.init()})},buildTemplate:function(a){this.container.innerHTML=a},_loadQuestion:function(a){var b=this.container.querySelector(".quiz-question");b.innerHTML=a.question},cycle:function(){var a=this;a.count<a.questions.length?(a._loadQuestion(a.questions[a.count]),a.count++,a.state="active",a._clearRadio()):(a.state="finished",a.buildTemplate('<div class="quiz-body" id="results"><div class="quiz-question">Done!</div><div class="quiz-results-body"></div><a href="#" class="quiz-retry">Try again</a></div>'),a.reset())},_clearRadio:function(){var a=this.container.querySelectorAll("input");[].forEach.call(a,function(a){a.checked=!1})},filter:function(a){var b=this.answers.filter(function(b){return b.answer===a});return b},on:function(a,b){if("change"===a){var c=this.container.querySelectorAll("input");[].forEach.call(c,function(a){a.addEventListener("change",b)})}if("submit"===a){var d=this.container.querySelector(".quiz-submit");d.addEventListener("click",b)}}};