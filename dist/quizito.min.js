/*! quizito - v0.0.2 - 2014-08-05
* Copyright (c) 2014 ; Licensed MIT */
function Quizito(a,b){"use strict";this.container=document.querySelector(a),this.questions=b}Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&Object.defineProperty(this,a,{get:e,set:f,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(a){var b=this[a];delete this[a],this[a]=b}}),Quizito.prototype={Template:{start:'<div class="quiz-body"><h3>Some quiz about bananas</h3><a href="#" class="quiz-start">Start</a></div>',active:'<div class="quiz-body"><div class="quiz-question">Question></div><div class="quiz-answer"><input type="radio" name="quiz-radio" id="quiz-yes" value="yes"> Yes <input type="radio" name="quiz-radio" id="quiz-no" value="no"> No </div> <div class="quiz-controls"> <a href="#" class="quiz-submit">submit</a> </div> </div>',finished:'<div class="quiz-body" id="results"><div class="quiz-question">Done!</div><div class="quiz-results-body"></div><a href="#" class="quiz-retry">Try again</a></div>'},init:function(){this.count=0,this.answers=[],this.start()},start:function(){var a=this;a.state="start",a._buildTemplate("start"),a.on("start",function(){a.active()})},active:function(){var a=this;a.state="active",a._buildTemplate("active"),a._cycle(),a.on("change",function(){a.answers.push({count:a.count,question:a.questions[a.count-1].question,answer:this.value})}),a.on("submit",function(b){b.preventDefault(),a._cycle()})},finished:function(){this._buildTemplate("finished");var a=this,b=a.container.querySelector(".quiz-retry");a.state="finished",b.addEventListener("click",function(b){b.preventDefault(),a.init()})},_buildTemplate:function(a){this.container.innerHTML=this.Template[a]},_loadQuestion:function(a){var b=this.container.querySelector(".quiz-question");b.innerHTML=a.question},_cycle:function(){var a=this;a.count<a.questions.length?(a._loadQuestion(a.questions[a.count]),a.count++,a._clearRadio()):a.finished()},_clearRadio:function(){var a=this.container.querySelectorAll("input");[].forEach.call(a,function(a){a.checked=!1})},filter:function(a){var b=this.answers.filter(function(b){return b.answer===a});return b},on:function(a,b){if("change"===a){var c=this.container.querySelectorAll("input");[].forEach.call(c,function(a){a.addEventListener("change",b)})}if("start"===a){var d=this.container.querySelector(".quiz-start");d.addEventListener("click",b)}if("submit"===a){var e=this.container.querySelector(".quiz-submit");e.addEventListener("click",b)}}};