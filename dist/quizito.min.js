/*! quizito - v0.0.2 - 2014-09-09
* Copyright (c) 2014 ; Licensed MIT */
"use strict";function Quizito(a,b){this.container=document.querySelector(a),this.questions=b}!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):(window.WatchJS=a(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){var a={noMore:!1},b=[],c=function(a){var b={};return a&&"[object Function]"==b.toString.call(a)},d=function(a){return"[object Array]"===Object.prototype.toString.call(a)},e=function(a,b){var c=[],e=[];if("string"!=typeof a&&"string"!=typeof b){if(d(a))for(var f=0;f<a.length;f++)void 0===b[f]&&c.push(f);else for(var f in a)a.hasOwnProperty(f)&&void 0===b[f]&&c.push(f);if(d(b))for(var g=0;g<b.length;g++)void 0===a[g]&&e.push(g);else for(var g in b)b.hasOwnProperty(g)&&void 0===a[g]&&e.push(g)}return{added:c,removed:e}},f=function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=a[c];return b},g=function(a,b,c,d){try{Object.observe(a,function(a){a.forEach(function(a){a.name===b&&d(a.object[a.name])})})}catch(e){try{Object.defineProperty(a,b,{get:c,set:d,enumerable:!0,configurable:!0})}catch(f){try{Object.prototype.__defineGetter__.call(a,b,c),Object.prototype.__defineSetter__.call(a,b,d)}catch(g){throw new Error("watchJS error: browser not supported :/")}}}},h=function(a,b,c){try{Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!1,value:c})}catch(d){a[b]=c}},i=function(){c(arguments[1])?j.apply(this,arguments):d(arguments[1])?k.apply(this,arguments):l.apply(this,arguments)},j=function(a,b,c,e){if("string"!=typeof a&&(a instanceof Object||d(a))){var f=[];if(d(a))for(var g=0;g<a.length;g++)f.push(g);else for(var h in a)"$val"!=h&&Object.prototype.hasOwnProperty.call(a,h)&&f.push(h);k(a,f,b,c,e),e&&w(a,"$$watchlengthsubjectroot",b,c)}},k=function(a,b,c,e,f){if("string"!=typeof a&&(a instanceof Object||d(a)))for(var g=0;g<b.length;g++){var h=b[g];l(a,h,c,e,f)}},l=function(a,b,e,f,g){"string"!=typeof a&&(a instanceof Object||d(a))&&(c(a[b])||(null!=a[b]&&(void 0===f||f>0)&&j(a[b],e,void 0!==f?f-1:f),p(a,b,e,f),g&&(void 0===f||f>0)&&w(a,b,e,f)))},m=function(){c(arguments[1])?n.apply(this,arguments):d(arguments[1])?o.apply(this,arguments):u.apply(this,arguments)},n=function(a,b){if(!(a instanceof String)&&(a instanceof Object||d(a)))if(d(a)){for(var c=[],e=0;e<a.length;e++)c.push(e);o(a,c,b)}else{var f=function(a){var c=[];for(var d in a)a.hasOwnProperty(d)&&(a[d]instanceof Object?f(a[d]):c.push(d));o(a,c,b)};f(a)}},o=function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&u(a,b[d],c)},p=function(b,c,d,e){var f=b[c];t(b,c),b.watchers||h(b,"watchers",{}),b.watchers[c]||(b.watchers[c]=[]);for(var i=0;i<b.watchers[c].length;i++)if(b.watchers[c][i]===d)return;b.watchers[c].push(d);var k=function(){return f},l=function(g){var h=f;f=g,0!==e&&b[c]&&j(b[c],d,void 0===e?e:e-1),t(b,c),a.noMore||h!==g&&(q(b,c,"set",g,h),a.noMore=!1)};g(b,c,k,l)},q=function(a,b,c,d,e){if(void 0!==b)for(var f=0;f<a.watchers[b].length;f++)a.watchers[b][f].call(a,b,c,d,e);else for(var b in a)a.hasOwnProperty(b)&&q(a,b,c,d,e)},r=["pop","push","reverse","shift","sort","slice","unshift","splice"],s=function(a,b,c,d){h(a[b],d,function(){var e=c.apply(a[b],arguments);return l(a,a[b]),"slice"!==d&&q(a,b,d,arguments),e})},t=function(a,b){if(a[b]&&!(a[b]instanceof String)&&d(a[b]))for(var c,e=r.length;e--;)c=r[e],s(a,b,a[b][c],c)},u=function(a,b,c){for(var d=0;d<a.watchers[b].length;d++){var e=a.watchers[b][d];e==c&&a.watchers[b].splice(d,1)}x(a,b,c)},v=function(){for(var a=0;a<b.length;a++){var c=b[a];if("$$watchlengthsubjectroot"===c.prop){var d=e(c.obj,c.actual);(d.added.length||d.removed.length)&&(d.added.length&&k(c.obj,d.added,c.watcher,c.level-1,!0),c.watcher.call(c.obj,"root","differentattr",d,c.actual)),c.actual=f(c.obj)}else{var d=e(c.obj[c.prop],c.actual);if(d.added.length||d.removed.length){if(d.added.length)for(var g=0;g<c.obj.watchers[c.prop].length;g++)k(c.obj[c.prop],d.added,c.obj.watchers[c.prop][g],c.level-1,!0);q(c.obj,c.prop,"differentattr",d,c.actual)}c.actual=f(c.obj[c.prop])}}},w=function(a,c,d,e){var g;g=f("$$watchlengthsubjectroot"===c?a:a[c]),b.push({obj:a,prop:c,actual:g,watcher:d,level:e})},x=function(a,c,d){for(var e=0;e<b.length;e++){var f=b[e];f.obj==a&&f.prop==c&&f.watcher==d&&b.splice(e,1)}};return setInterval(v,50),a.watch=i,a.unwatch=m,a.callWatchers=q,a}),Array.prototype.filter||(Array.prototype.filter=function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Quizito.prototype={Template:{start:'<div class="quiz-body"><h3>Some quiz about bananas</h3><a href="#" class="quiz-start">Start</a></div>',active:'<div class="quiz-body"><div class="quiz-question">Question></div><div class="quiz-answer"><div class="radio"><label><input type="radio" name="quiz-radio" id="quiz-yes" value="yes">Yes</label></div><div class="radio"><label><input type="radio" name="quiz-radio" id="quiz-no" value="no">No</label></div></div><div class="quiz-controls"><a href="#" class="quiz-submit">submit</a></div></div>',finished:'<div class="quiz-body" id="results"><div class="quiz-question">Done!</div><div class="quiz-results-body"></div><a href="#" class="quiz-retry">Try again</a></div>'},init:function(){this.count=0,this.answers=[],this.valid=!1,this.start()},start:function(){var a=this;a.state="start",a._buildTemplate("start"),a.on("start",function(b){b.preventDefault(),a.active()})},active:function(){var a=this;a.state="active",a._buildTemplate("active"),a._cycle(),a.on("change",function(){a._validate()}),a.on("submit",function(b){b.preventDefault(),a.valid?(a.answers.push({count:a.count,question:a.questions[a.count-1].question,answer:a._filterForSelected(a.container.querySelectorAll("input"))}),a._cycle()):alert("Please select a value before continuing")})},finished:function(){this._buildTemplate("finished");var a=this,b=a.container.querySelector(".quiz-retry");a.state="finished",b.addEventListener("click",function(b){b.preventDefault(),a.init()})},_buildTemplate:function(a){this.container.innerHTML=this.Template[a]},_loadQuestion:function(a){var b=this.container.querySelector(".quiz-question");b.innerHTML=a.question},_cycle:function(){var a=this;a.valid=!1,a.count<a.questions.length?(a._loadQuestion(a.questions[a.count]),a.count++,a._clearRadio()):a.finished()},_filterForSelected:function(a){var b=[].filter.call(a,function(a){return a.checked===!0});return b[0].value},_clearRadio:function(){var a=this.container.querySelectorAll("input");[].forEach.call(a,function(a){a.checked=!1})},filter:function(a){var b=this.answers.filter(function(b){return b.answer===a});return b},_validate:function(){var a=this,b=a.container.querySelectorAll("input");[].forEach.call(b,function(b){"radio"===b.type&&b.checked&&(a.valid=!0)})},on:function(a,b){if("change"===a){var c=this.container.querySelectorAll("input");[].forEach.call(c,function(a){a.addEventListener("change",b)})}if("start"===a){var d=this.container.querySelector(".quiz-start");d.addEventListener("click",b)}if("submit"===a){var e=this.container.querySelector(".quiz-submit");e.addEventListener("click",b)}},watch:function(a,b){var c=this;watch(c,a,b)}};