/*! newsquiz - v0.0.1 - 2014-08-04
* Copyright (c) 2014 ; Licensed MIT */
function NewsQuiz(a,b){"use strict";this.container=document.querySelector(a),this.questions=b,this.init()}NewsQuiz.prototype={init:function(){var a=this;a.state="start",a.count=0,a.answers=[],a.buildTemplate('<div class="quiz-body"><div class="quiz-question">Question></div><div class="quiz-answer"><input type="radio" name="quiz-radio" id="quiz-yes" value="yes"> Yes <input type="radio" name="quiz-radio" id="quiz-no" value="no"> No </div> <div class="quiz-controls"> <a href="#" class="quiz-submit">submit</a> </div> </div>'),a.cycle(),a.on("change",function(){a.answers.push({count:a.count,question:a.questions[a.count-1].question,answer:this.value})}),a.on("submit",function(b){b.preventDefault(),a.cycle()}),a.watch("count",function(a,b,c){return c}),a.watch("state",function(a,b,c){return c})},reset:function(){var a=this,b=a.container.querySelector(".quiz-retry");b.addEventListener("click",function(b){b.preventDefault(),a.init()})},buildTemplate:function(a){this.container.innerHTML=a},_loadQuestion:function(a){var b=this.container.querySelector(".quiz-question");b.innerHTML=a.question},cycle:function(){var a=this;a.count<a.questions.length?(a._loadQuestion(a.questions[a.count]),a.count++,a.state="active",a._clearRadio()):(a.state="finished",a.buildTemplate('<div class="quiz-body" id="results"><div class="quiz-question">Done!</div><div class="quiz-results-body"></div><a href="#" class="quiz-retry">Try again</a></div>'),a.reset())},_clearRadio:function(){var a=this.container.querySelectorAll("input");[].forEach.call(a,function(a){a.checked=!1})},filter:function(a){var b=this.answers.filter(function(b){return b.answer===a});return b},on:function(a,b){if("change"===a){var c=this.container.querySelectorAll("input");[].forEach.call(c,function(a){a.addEventListener("change",b)})}if("submit"===a){var d=this.container.querySelector(".quiz-submit");d.addEventListener("click",b)}}};